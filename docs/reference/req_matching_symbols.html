<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Request Matching Symbols — req_matching_symbols • InteractiveTradeR</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cyborg/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



  <link href="../extra.css" rel="stylesheet">
  <script src="../extra.js"></script>

<meta property="og:title" content="Request Matching Symbols — req_matching_symbols" />
<meta property="og:description" content="Search Interactive Brokers' database for stocks (and stocks only)
 by specifying a search string pattern. pattern may be a ticker,
 e.g. &quot;AAPL&quot;, or part of a stock's name, e.g. &quot;App&quot;." />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">InteractiveTradeR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/Socks.html">Socks</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/JakeVestal/InteractiveTradeR">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Request Matching Symbols</h1>
    <small class="dont-index">Source: <a href='https://github.com/JakeVestal/InteractiveTradeR/blob/master/R/req_matching_symbols.R'><code>R/req_matching_symbols.R</code></a></small>
    <div class="hidden name"><code>req_matching_symbols.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Search Interactive Brokers' database for stocks (and <code>stocks</code> only)
 by specifying a search string <code>pattern</code>. <code>pattern</code> may be a ticker,
 e.g. "AAPL", or part of a stock's name, e.g. "App".</p>
    </div>

    <pre class="usage"><span class='fu'>req_matching_symbols</span>(<span class='no'>pattern</span>, <span class='kw'>channel</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>pattern</th>
      <td><p>Character vector of length 1. The search string for which
matching stocks are sought. May be a ticker, e.g. "IBM", or part of a
stock's name, e.g. "International". Not case sensitive.</p></td>
    </tr>
    <tr>
      <th>channel</th>
      <td><p>One of the following:</p>
<ul>
<li><p><strong>Not Specified</strong> (Default): Opens a new connection to IB, uses
  it to issue the request and retrieve the response, and closes connection
  behind itself upon completion.</p></li>
<li><p><strong>The Name of a Sock</strong>: Character vector, length 1. The name of
  an open, connected socket in the <a href='socks.html'>sock_drawer</a>; e.g., "master", "tws",
  or "sock_123"</p></li>
<li><p><strong>Numeric Client ID</strong>: Numeric, length 1. The client ID for
  which open orders are to be retrieved; e.g., 0, 874, 123. If a client ID is
  passed, and no socket in the <a href='socks.html'>sock_drawer</a> is connected on that ID,
  then a new socket will be opened on that ID, and closed upon function exit.</p></li>
<li><p><strong>A <code>sockconn</code> Connection</strong>: An open connection object of
  class "sockconn", connected to the IB API; e.g., <code>sock_drawer$tws</code></p></li>
</ul></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A tibble object in which each row corresponds to an asset whose name
or ticker matched the <code>pattern</code> supplied. The tibble's columns are:</p><ul>
<li><p><code>con_id</code> &lt;chr&gt;: Interactive Brokers' unique numeric ID</p></li>
<li><p><code>symbol</code> &lt;chr&gt;: Exchange symbol (i.e., ticker symbol)</p></li>
<li><p><code>sec_type</code> &lt;chr&gt;: Asset class ("STK" for stock)</p></li>
<li><p><code>primary_exchange</code> &lt;chr&gt;: Financial exchange on which most of
  the asset's trade volume takes place (NYSE, ARCA, etc).</p></li>
<li><p><code>currency</code> &lt;chr&gt;: Currency in which trades are made.</p></li>
<li><p><code>asset_types</code> &lt;list&gt;: A list of other financial products
  (options, bonds, warrants, etc) that derive from the asset and are
  available to trade through Interactive Brokers.</p></li>
</ul>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><strong>Space out calls to <code>req_matching_symbols</code>() by at least 1
second.</strong> IB will only allow at most 1 call to <code>req_matching_symbols</code> per
second <em>per user</em>, meaning that even if you run seperate searches for
matching symbols on different sockets at the same time, you'll get an error
telling you that IB is busy processing the request for a different client.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Other asset info: 
<code><a href='req_contract_details.html'>req_contract_details</a>()</code>,
<code><a href='req_sec_def_opt_params.html'>req_sec_def_opt_params</a>()</code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Fetch matching symbols for pattern "international"</span>
<span class='no'>matching_symbols</span> <span class='kw'>&lt;-</span> <span class='fu'>req_matching_symbols</span>(<span class='st'>"international"</span>)
<span class='co'># Print matching symbols</span>
<span class='no'>matching_symbols</span></div><div class='output co'>#&gt; NULL</div><div class='input'>
<span class='co'># If that doesn't satisfy, try a few more search strings. Wait 3 seconds after</span>
<span class='co'># each one so as to be kind to IB's servers.</span>
<span class='fu'>req_matching_symbols</span>(<span class='st'>"ibm"</span>)</div><div class='output co'>#&gt; <span style='color: #949494;'># A tibble: 15 x 6</span><span>
#&gt;    con_id    symbol    sec_type primary_exchange currency asset_types
#&gt;    </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>     </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>     </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>    </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>            </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>    </span><span style='color: #949494;font-style: italic;'>&lt;list&gt;</span><span>     
#&gt; </span><span style='color: #BCBCBC;'> 1</span><span> 38709473  IBM       STK      MEXI             MXN      </span><span style='color: #949494;'>&lt;chr [0]&gt;</span><span>  
#&gt; </span><span style='color: #BCBCBC;'> 2</span><span> 1411277   IBM       STK      IBIS             EUR      </span><span style='color: #949494;'>&lt;chr [0]&gt;</span><span>  
#&gt; </span><span style='color: #BCBCBC;'> 3</span><span> 8314      IBM       STK      NYSE             USD      </span><span style='color: #949494;'>&lt;chr [6]&gt;</span><span>  
#&gt; </span><span style='color: #BCBCBC;'> 4</span><span> 41645598  IBMUSD    STK      EBS              USD      </span><span style='color: #949494;'>&lt;chr [0]&gt;</span><span>  
#&gt; </span><span style='color: #BCBCBC;'> 5</span><span> 205626661 IBMK      STK      ARCA             USD      </span><span style='color: #949494;'>&lt;chr [0]&gt;</span><span>  
#&gt; </span><span style='color: #BCBCBC;'> 6</span><span> 163609161 IBMI      STK      ARCA             USD      </span><span style='color: #949494;'>&lt;chr [0]&gt;</span><span>  
#&gt; </span><span style='color: #BCBCBC;'> 7</span><span> 205626656 IBMJ      STK      ARCA             USD      </span><span style='color: #949494;'>&lt;chr [0]&gt;</span><span>  
#&gt; </span><span style='color: #BCBCBC;'> 8</span><span> 272692107 IBML      STK      BATS             USD      </span><span style='color: #949494;'>&lt;chr [0]&gt;</span><span>  
#&gt; </span><span style='color: #BCBCBC;'> 9</span><span> 311679969 IBMM      STK      BATS             USD      </span><span style='color: #949494;'>&lt;chr [0]&gt;</span><span>  
#&gt; </span><span style='color: #BCBCBC;'>10</span><span> 341758684 IBMN      STK      BATS             USD      </span><span style='color: #949494;'>&lt;chr [0]&gt;</span><span>  
#&gt; </span><span style='color: #BCBCBC;'>11</span><span> 361208024 IBMQ      STK      BATS             USD      </span><span style='color: #949494;'>&lt;chr [0]&gt;</span><span>  
#&gt; </span><span style='color: #BCBCBC;'>12</span><span> 359815312 IBMO      STK      BATS             USD      </span><span style='color: #949494;'>&lt;chr [0]&gt;</span><span>  
#&gt; </span><span style='color: #BCBCBC;'>13</span><span> 360508598 IBMP      STK      BATS             USD      </span><span style='color: #949494;'>&lt;chr [0]&gt;</span><span>  
#&gt; </span><span style='color: #BCBCBC;'>14</span><span> 365190838 IBMFNIFTY STK      NSE              INR      </span><span style='color: #949494;'>&lt;chr [0]&gt;</span><span>  
#&gt; </span><span style='color: #BCBCBC;'>15</span><span> 265861716 IBM.REC   STK      CARISK           USD      </span><span style='color: #949494;'>&lt;chr [0]&gt;</span><span>  </div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/Sys.sleep.html'>Sys.sleep</a></span>(<span class='fl'>3</span>)
<span class='fu'>req_matching_symbols</span>(<span class='st'>"business"</span>)</div><div class='output co'>#&gt; </span><span style='color: #949494;'># A tibble: 15 x 6</span><span>
#&gt;    con_id    symbol sec_type primary_exchange currency asset_types
#&gt;    </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>     </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>  </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>    </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>            </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>    </span><span style='color: #949494;font-style: italic;'>&lt;list&gt;</span><span>     
#&gt; </span><span style='color: #BCBCBC;'> 1</span><span> 41645598  IBMUSD STK      EBS              USD      </span><span style='color: #949494;'>&lt;chr [0]&gt;</span><span>  
#&gt; </span><span style='color: #BCBCBC;'> 2</span><span> 38709473  IBM    STK      MEXI             MXN      </span><span style='color: #949494;'>&lt;chr [0]&gt;</span><span>  
#&gt; </span><span style='color: #BCBCBC;'> 3</span><span> 1411277   IBM    STK      IBIS             EUR      </span><span style='color: #949494;'>&lt;chr [0]&gt;</span><span>  
#&gt; </span><span style='color: #BCBCBC;'> 4</span><span> 8314      IBM    STK      NYSE             USD      </span><span style='color: #949494;'>&lt;chr [6]&gt;</span><span>  
#&gt; </span><span style='color: #BCBCBC;'> 5</span><span> 6604892   PSB    STK      NYSE             USD      </span><span style='color: #949494;'>&lt;chr [3]&gt;</span><span>  
#&gt; </span><span style='color: #BCBCBC;'> 6</span><span> 44263073  4733   STK      TSEJ             JPY      </span><span style='color: #949494;'>&lt;chr [1]&gt;</span><span>  
#&gt; </span><span style='color: #BCBCBC;'> 7</span><span> 39131134  2834   STK      TAI              TWD      </span><span style='color: #949494;'>&lt;chr [0]&gt;</span><span>  
#&gt; </span><span style='color: #BCBCBC;'> 8</span><span> 234647237 BBU    STK      NYSE             USD      </span><span style='color: #949494;'>&lt;chr [2]&gt;</span><span>  
#&gt; </span><span style='color: #BCBCBC;'> 9</span><span> 235343043 BBU.UN STK      TSE              CAD      </span><span style='color: #949494;'>&lt;chr [2]&gt;</span><span>  
#&gt; </span><span style='color: #BCBCBC;'>10</span><span> 48880606  RLIA   STK      BM               EUR      </span><span style='color: #949494;'>&lt;chr [0]&gt;</span><span>  
#&gt; </span><span style='color: #BCBCBC;'>11</span><span> 229728912 MOO    STK      ARCA             USD      </span><span style='color: #949494;'>&lt;chr [4]&gt;</span><span>  
#&gt; </span><span style='color: #BCBCBC;'>12</span><span> 260519091 147    STK      SEHK             HKD      </span><span style='color: #949494;'>&lt;chr [0]&gt;</span><span>  
#&gt; </span><span style='color: #BCBCBC;'>13</span><span> 132897787 SV3U   STK      SGX              SGD      </span><span style='color: #949494;'>&lt;chr [0]&gt;</span><span>  
#&gt; </span><span style='color: #BCBCBC;'>14</span><span> 4726958   BBSI   STK      NASDAQ.NMS       USD      </span><span style='color: #949494;'>&lt;chr [3]&gt;</span><span>  
#&gt; </span><span style='color: #BCBCBC;'>15</span><span> 171642734 NEWT   STK      NASDAQ.NMS       USD      </span><span style='color: #949494;'>&lt;chr [3]&gt;</span><span>  </div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/Sys.sleep.html'>Sys.sleep</a></span>(<span class='fl'>3</span>)
<span class='fu'>req_matching_symbols</span>(<span class='st'>"machines"</span>)</div><div class='output co'>#&gt; </span><span style='color: #949494;'># A tibble: 11 x 6</span><span>
#&gt;    con_id    symbol    sec_type primary_exchange currency asset_types
#&gt;    </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>     </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>     </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>    </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>            </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>    </span><span style='color: #949494;font-style: italic;'>&lt;list&gt;</span><span>     
#&gt; </span><span style='color: #BCBCBC;'> 1</span><span> 41645598  IBMUSD    STK      EBS              USD      </span><span style='color: #949494;'>&lt;chr [0]&gt;</span><span>  
#&gt; </span><span style='color: #BCBCBC;'> 2</span><span> 38709473  IBM       STK      MEXI             MXN      </span><span style='color: #949494;'>&lt;chr [0]&gt;</span><span>  
#&gt; </span><span style='color: #BCBCBC;'> 3</span><span> 1411277   IBM       STK      IBIS             EUR      </span><span style='color: #949494;'>&lt;chr [0]&gt;</span><span>  
#&gt; </span><span style='color: #BCBCBC;'> 4</span><span> 8314      IBM       STK      NYSE             USD      </span><span style='color: #949494;'>&lt;chr [6]&gt;</span><span>  
#&gt; </span><span style='color: #BCBCBC;'> 5</span><span> 295400721 M2Z       STK      FWB2             EUR      </span><span style='color: #949494;'>&lt;chr [0]&gt;</span><span>  
#&gt; </span><span style='color: #BCBCBC;'> 6</span><span> 146510035 MMX       STK      LSE              GBP      </span><span style='color: #949494;'>&lt;chr [0]&gt;</span><span>  
#&gt; </span><span style='color: #BCBCBC;'> 7</span><span> 92870230  WINDMACHI STK      NSE              INR      </span><span style='color: #949494;'>&lt;chr [0]&gt;</span><span>  
#&gt; </span><span style='color: #BCBCBC;'> 8</span><span> 311885911 MACPOWER  STK      NSE              INR      </span><span style='color: #949494;'>&lt;chr [0]&gt;</span><span>  
#&gt; </span><span style='color: #BCBCBC;'> 9</span><span> 56983469  LOKESHMAC STK      NSE              INR      </span><span style='color: #949494;'>&lt;chr [0]&gt;</span><span>  
#&gt; </span><span style='color: #BCBCBC;'>10</span><span> 332653316 MARSHALL  STK      NSE              INR      </span><span style='color: #949494;'>&lt;chr [0]&gt;</span><span>  
#&gt; </span><span style='color: #BCBCBC;'>11</span><span> 265861716 IBM.REC   STK      CARISK           USD      </span><span style='color: #949494;'>&lt;chr [0]&gt;</span><span>  </div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/Sys.sleep.html'>Sys.sleep</a></span>(<span class='fl'>3</span>)

<span class='co'># Say you only wanted to know what asset types -- futures, options, warrants,</span>
<span class='co'># etc -- that were available for the stock traded on the NYSE under the symbol</span>
<span class='co'># "IBM". You could pipe the output of req_matching_symbols() to a series of</span>
<span class='co'># functions with the end result of returning only the info you want:</span>
<span class='fu'>req_matching_symbols</span>(<span class='st'>"ibm"</span>) <span class='kw'>%&gt;%</span>
  <span class='kw pkg'>dplyr</span><span class='kw ns'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span>(<span class='no'>symbol</span> <span class='kw'>==</span> <span class='st'>"IBM"</span> <span class='kw'>&amp;</span> <span class='no'>primary_exchange</span> <span class='kw'>==</span> <span class='st'>"NYSE"</span>) <span class='kw'>%&gt;%</span>
  <span class='kw pkg'>dplyr</span><span class='kw ns'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span>(<span class='no'>asset_types</span>) <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/r/base/unlist.html'>unlist</a></span>(<span class='kw'>use.names</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</div><div class='output co'>#&gt; [1] "CFD"  "OPT"  "IOPT" "WAR"  "FUT"  "BAG" </div></span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#details">Details</a></li>
      <li><a href="#see-also">See also</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Jake Vestal.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


