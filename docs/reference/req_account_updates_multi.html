<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Request Account Updates Multi — req_account_updates_multi • InteractiveTradeR</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cyborg/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



  <link href="../extra.css" rel="stylesheet">
  <script src="../extra.js"></script>

<meta property="og:title" content="Request Account Updates Multi — req_account_updates_multi" />
<meta property="og:description" content="This function either fetches or sets up a subscription to receive the data
that appear in the
Account
Window window of Trader Workstation. req_account_updates_multi() may
be used to set up multiple simultaneous subscriptions to many accounts /
model codes. IB's documentation may be found on the
Account
Updates page." />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">InteractiveTradeR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/Socks.html">Socks</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/JakeVestal/InteractiveTradeR">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Request Account Updates Multi</h1>
    <small class="dont-index">Source: <a href='https://github.com/JakeVestal/InteractiveTradeR/blob/master/R/req_account_updates_multi.R'><code>R/req_account_updates_multi.R</code></a></small>
    <div class="hidden name"><code>req_account_updates_multi.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function either fetches or sets up a subscription to receive the data
that appear in the
<a href='https://www.interactivebrokers.com/en/software/tws/usersguidebook/realtimeactivitymonitoring/the_account_window.htm'>Account
Window</a> window of Trader Workstation. <code>req_account_updates_multi</code>() may
be used to set up multiple simultaneous subscriptions to many accounts /
model codes. IB's documentation may be found on the
<a href='https://interactivebrokers.github.io/tws-api/account_updates.html'>Account
Updates</a> page.</p>
    </div>

    <pre class="usage"><span class='fu'>req_account_updates_multi</span>(
  <span class='kw'>account</span> <span class='kw'>=</span> <span class='st'>"All"</span>,
  <span class='kw'>modelCode</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>ledgerAndNLV</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>channel</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>return_data</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/NULL.html'>is.null</a></span>(<span class='no'>channel</span>)
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>account</th>
      <td><p>Character vector of length 1 containing a valid <strong>account code</strong>.</p></td>
    </tr>
    <tr>
      <th>modelCode</th>
      <td><p>Character vector of length 1 containing a valid <strong>model code</strong>.</p></td>
    </tr>
    <tr>
      <th>ledgerAndNLV</th>
      <td><p>Boolean of length 1, defaults to FALSE. If TRUE, then the created
subscriptions are treated as "lightweight requests", meaning that the data
returned for the account or model codes supplied will include only currency
positions (as opposed to both account values and currency positions).</p></td>
    </tr>
    <tr>
      <th>channel</th>
      <td><p>One of the following:</p>
<ul>
<li><p><strong>Not Specified</strong> (Default): Opens a new connection to IB, uses
  it to issue the request and retrieve the response, and closes connection
  behind itself upon completion.</p></li>
<li><p><strong>The Name of a Sock</strong>: Character vector, length 1. The name of
  an open, connected socket in the <a href='socks.html'>sock_drawer</a>; e.g., "master", "tws",
  or "sock_123"</p></li>
<li><p><strong>Numeric Client ID</strong>: Numeric, length 1. The client ID for
  which open orders are to be retrieved; e.g., 0, 874, 123. If a client ID is
  passed, and no socket in the <a href='socks.html'>sock_drawer</a> is connected on that ID,
  then a new socket will be opened on that ID, and closed upon function exit.</p></li>
<li><p><strong>A <code>sockconn</code> Connection</strong>: An open connection object of
  class "sockconn", connected to the IB API; e.g., <code>sock_drawer$tws</code></p></li>
</ul></td>
    </tr>
    <tr>
      <th>return_data</th>
      <td><p>Boolean of length 1. Defaults to TRUE unless argument <em>channel</em> is
specified. If FALSE, data retrieved by the function will be returned as the
funciton's output. If TRUE, then a Boolean succeses flag will be returned as
the function's output indicating the success (TRUE) or failure (FALSE) of the
function's attempt to transceive data to/from IB. Data in the
<strong><code>treasury</code></strong> is always updated regardless of the value passed as
<em>return_data</em> in the function call.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>This function is called for its side effect of updating the
<strong><code>treasury</code></strong>, which takes place every time the function executes.
Additionally, the function's return value depends upon the value passed in as
<em>return_data</em> as follows:</p>
<ul>
<li><p><strong>If <code>return_data == FALSE</code></strong>: A Boolean success flag,
  returned invisibly, indicating that the function executed correctly and
  updated the <strong><code>treasury</code></strong> with any new data retrieved.</p></li>
<li><p><strong>If <code>return_data == TRUE</code></strong>: Any new data retrieved will
  be returned in a <a href='https://tibble.tidyverse.org/reference/tibble.html'>tibble</a> in addition to being added to the
  <strong><code>treasury</code></strong>. If no new data is available, returns NULL.</p></li>
</ul>

<p><em>return_data</em> defaults to TRUE unless <em>channel</em> is specified.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><strong>"All" Option</strong>: If <em>account</em> is not specified,
<code>req_account_updates_multi</code>() will default to <code>account = "All"</code>,
which will return data for all accounts accessible by the signed-in user.
This option is not available for users who manage more than 50 accounts.</p>
<p><strong>Models</strong>: Model Portfolios, or "Models" for short, can be though of as
named templates that will allocate funds across investment products in a
specified manner. When passed to <code>req_account_updates_multi</code>() as
<em>model_code</em>, they behave like stocks -- they have postions, market
prices, values, etc. To use Model Portfolios you need to have a Financial
Advisor account, and the Model Portfolios feature needs to be activated.
Learn more on
<a href='https://www.interactivebrokers.com/en/index.php?f=20917'>Interactive
Brokers' Model Portfolios page</a>.</p>
<p><strong>No Positions</strong>: If you call <code>req_account_updates_multi</code>() on an
account that has cash but no positions, then data will be sent to the socket
once initially, but will not update thereafter.</p>
    <h2 class="hasAnchor" id="accounts-treasury-object"><a class="anchor" href="#accounts-treasury-object"></a>ACCOUNTS Treasury Object</h2>

    

<p><code>req_account_summary</code>() updates the <strong>ACCOUNTS</strong> object in the
treasury. ACCOUNTS is a tibble in which each row represents a
parameter pertaining to a particular account. Has the following columns:</p><ul>
<li><p><strong>account</strong> &lt;chr&gt;: Account ID (e.g., "DF1234567")</p></li>
<li><p><strong>tag</strong>  &lt;chr&gt;: Name of account tag (e.g., "BuyingPower")</p></li>
<li><p><strong>tag_value</strong> &lt;chr&gt;: Value of tag (e.g., "500000")</p></li>
<li><p><strong>currency</strong> &lt;chr&gt;: 3-letter currency abbreviation if
    <code>tag_value</code> is a monetary amount, "" otherwise.</p></li>
</ul>

    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Other treasury: 
<code><a href='cancel_account_summary.html'>cancel_account_summary</a>()</code>,
<code><a href='cancel_account_updates_multi.html'>cancel_account_updates_multi</a>()</code>,
<code><a href='req_account_summary.html'>req_account_summary</a>()</code>,
<code><a href='req_account_updates.html'>req_account_updates</a>()</code></p></div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#details">Details</a></li>
      <li><a href="#accounts-treasury-object">ACCOUNTS Treasury Object</a></li>
      <li><a href="#see-also">See also</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Jake Vestal.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


