<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Request Market Data — req_mkt_data • InteractiveTradeR</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cyborg/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



  <link href="../extra.css" rel="stylesheet">
  <script src="../extra.js"></script>

<meta property="og:title" content="Request Market Data — req_mkt_data" />
<meta property="og:description" content="Fetch live (or 15-minute delayed) market data." />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">InteractiveTradeR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/Socks.html">Socks</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/JakeVestal/InteractiveTradeR">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Request Market Data</h1>
    <small class="dont-index">Source: <a href='https://github.com/JakeVestal/InteractiveTradeR/blob/master/R/req_mkt_data.R'><code>R/req_mkt_data.R</code></a></small>
    <div class="hidden name"><code>req_mkt_data.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Fetch live (or 15-minute delayed) market data.</p>
    </div>

    <pre class="usage"><span class='fu'>req_mkt_data</span>(
  <span class='no'>contract</span>,
  <span class='no'>data_name</span>,
  <span class='kw'>channel</span> <span class='kw'>=</span> <span class='st'>"async"</span>,
  <span class='kw'>mktDataType</span> <span class='kw'>=</span> <span class='st'>"REALTIME"</span>,
  <span class='kw'>genericTickList</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>snapshot</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>regulatorySnapshot</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>contract</th>
      <td><p>Named character vector of contract parameter(s). The name of each element identifies the parameter -- for example, <code>secType</code>, <code>symbol</code>, <code>exchange</code>... -- and each element itself gives the set value (e.g., "STK", "IBM", "SMART"). <br /> <br /> <strong>The `contract` parameters that may be used with</strong> <code>place_order</code>() <strong>are</strong>:<br /><code>deltaNeutralContract</code>, <code>secId</code>, <code>conId</code>, <code>comboLegs</code>, <code>secType</code>, <code>tradingClass</code>, <code>symbol</code>, <code>lastTradeDateOrContractMonth</code>, <code>strike</code>, <code>right</code>, <code>multiplier</code>, <code>exchange</code>, <code>primaryExchange</code>, <code>currency</code>, <code>localSymbol</code>, <code>secIdType</code><br /> <br /> See <a href='contracts.html'>contract</a> for detailed information on all <code>contract</code> parameters.</p></td>
    </tr>
    <tr>
      <th>data_name</th>
      <td><p>Character vector of length 1. 
<strong>If not supplied</strong>, <code>req_mkt_data()</code> will use the data name
"<strong><em>X</em>_symbol</strong>" where <em>X</em> is a simple counting integer and
<em>symbol</em> is the value of the <em>symbol</em> parameter in the
<em>contract</em> object.
<strong>If supplied</strong>, <code>data_name</code> becomes Your own personal identifier
for the market data subscription. Good choices might be the contract's
symbol, conId, or description (if combo). All market data received by a
mkt_data subscription will be stored in the <strong>mkt_data</strong> environment
under the name <em>data_name</em>. Therefore, no two mkt_data subscriptions may
have identical <em>data_name</em>s.</p></td>
    </tr>
    <tr>
      <th>channel</th>
      <td><p>One of the following:</p>
<ul>
<li><p><strong>Not Specified</strong> (Default): Opens a new connection to IB, uses
  it to issue the request and retrieve the response, and closes connection
  behind itself upon completion.</p></li>
<li><p><strong>The Name of a Sock</strong>: Character vector, length 1. The name of
  an open, connected socket in the <a href='socks.html'>sock_drawer</a>; e.g., "master", "tws",
  or "sock_123"</p></li>
<li><p><strong>Numeric Client ID</strong>: Numeric, length 1. The client ID for
  which open orders are to be retrieved; e.g., 0, 874, 123. If a client ID is
  passed, and no socket in the <a href='socks.html'>sock_drawer</a> is connected on that ID,
  then a new socket will be opened on that ID, and closed upon function exit.</p></li>
<li><p><strong>A <code>sockconn</code> Connection</strong>: An open connection object of
  class "sockconn", connected to the IB API; e.g., <code>sock_drawer$tws</code></p></li>
</ul></td>
    </tr>
    <tr>
      <th>mktDataType</th>
      <td><p>Either:</p><ol>
<li><p>String having one of the following values: "<strong>REALTIME</strong>",
  "<strong>FROZEN</strong>", "<strong>DELAYED</strong>", or "<strong>DELAYED_FROZEN</strong>".</p></li>
<li><p>Integer from 1 to 4, inclusive, corresponding respectively to each of
  the above choices (e.g., <code>mktDataType = 3</code> will set the market data
  type to "<strong>DELAYED</strong>").</p></li>
</ol></td>
    </tr>
    <tr>
      <th>genericTickList</th>
      <td><p>Not yet implemented, stay tuned</p></td>
    </tr>
    <tr>
      <th>snapshot</th>
      <td><p>If set to TRUE, the subscription created by <code>req_mkt_data()</code> will be
destroyed after a complete "snapshot" of market data is obtained for the
<em>contract</em>. The default is <code>snapshot = FALSE</code>, which will cause the
subscription to stay opened until cancelled by the user making a call to
<a href='cancel_mkt_data.html'>cancel_mkt_data</a>().</p></td>
    </tr>
    <tr>
      <th>regulatorySnapshot</th>
      <td><p>Not yet implemented, stay tuned</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The attributes <em>canAutoExecute</em>, <em>pastLimit</em>, and <em>preOpen</em>
are unnecessary in InteractiveTradeR because you can easily create your own
flags that accept market data as input. The aren't that much use anyway, and
are mostly holdovers from earlier versions &amp; systems.</p>
    <h2 class="hasAnchor" id="no-sync-mode"><a class="anchor" href="#no-sync-mode"></a>No Sync Mode</h2>

    

<p><code>req_mkt_data()</code> can't be called in Sync Mode. Instead, this function
must be implimented as follows:</p><ol>
<li><p>Create a connection to Interactive Brokers with 
    <a href='create_new_connections.html'>create_new_connections</a>() if a connection doesn't already exist</p></li>
<li><p>Call <code>req_mkt_data()</code> to start a market data subscription</p></li>
<li><p>Call <a href='read_sock_drawer.html'>read_sock_drawer</a>() to refresh the <a href='mkt_data.html'>mkt_data</a> slate. 
    Do this as often as you need to keep <a href='mkt_data.html'>mkt_data</a> up-to-date.</p></li>
<li><p>Call <a href='cancel_mkt_data.html'>cancel_mkt_data</a>() when you're finished</p></li>
</ol>

<p>If <code>snapshot = TRUE</code>, then the subscription will destroy itself once a 
full market data snapshot has been obtained by <a href='read_sock_drawer.html'>read_sock_drawer</a>(), so 
there's no need to call <a href='cancel_mkt_data.html'>cancel_mkt_data</a>().</p>
    <h2 class="hasAnchor" id="the-mkt-data-slate"><a class="anchor" href="#the-mkt-data-slate"></a>The <a href='mkt_data.html'>mkt_data</a> Slate</h2>

    
 
<p>Data fetched by <code>req_mkt_data()</code> is stored in the <a href='mkt_data.html'>mkt_data</a> slate
under the name specified in the <em>data_name</em> argument (or the default
data name "<strong><em>X</em>_symbol</strong>" if no <em>data_name</em> not supplied).</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Other market data: 
<code><a href='cancel_mkt_data.html'>cancel_mkt_data</a>()</code>,
<code><a href='req_market_data_type.html'>req_market_data_type</a>()</code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># --&gt; This example may be run on a paper trading account with no market data</span>
<span class='co'># feed. This will be the case if you start up a new IB account without</span>
<span class='co'># purchasing a subscription. In that case, you'll see a "Market Data not</span>
<span class='co'># subscribed..." message, which means everything is operating normally. If you</span>
<span class='co'># purchase a data subscription, this message will not appear.</span>

<span class='co'># Create a connection to IB</span>
<span class='fu'><a href='create_new_connections.html'>create_new_connections</a></span>()

<span class='co'>#### Snapshot Example: Exxon stock</span>
<span class='co'>################################################################################</span>
<span class='co'># Fetch a delayed market data snapshot for Exxon (XOM)</span>
<span class='fu'>req_mkt_data</span>(
  <span class='kw'>contract</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(
    <span class='kw'>symbol</span>   <span class='kw'>=</span> <span class='st'>"XOM"</span>,
    <span class='kw'>secType</span>  <span class='kw'>=</span> <span class='st'>"STK"</span>,
    <span class='kw'>currency</span> <span class='kw'>=</span> <span class='st'>"USD"</span>,
    <span class='kw'>exchange</span> <span class='kw'>=</span> <span class='st'>"SMART"</span>
  ),
  <span class='kw'>snapshot</span>    <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>data_name</span>   <span class='kw'>=</span> <span class='st'>"Exxon_delayed"</span>,
  <span class='kw'>mktDataType</span> <span class='kw'>=</span> <span class='st'>"DELAYED"</span>
)

<span class='co'># Note that a "mkt_data" subscription now appears:</span>
<span class='no'>subscriptions</span>$<span class='no'>mkt_data</span></div><div class='output co'>#&gt; <span style='color: #949494;'># A tibble: 1 x 8</span><span>
#&gt;   req_name contract mktDataType snapshot regulatorySnaps… req_id conn_row
#&gt;   </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>    </span><span style='color: #949494;font-style: italic;'>&lt;list&gt;</span><span>         </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span>    </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span>             </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>    </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>
#&gt; </span><span style='color: #BCBCBC;'>1</span><span> Exxon_d… </span><span style='color: #949494;'>&lt;chr [4</span><span>…           3 TRUE     FALSE                 6        6
#&gt; </span><span style='color: #949494;'># … with 1 more variable: client_id </span><span style='color: #949494;font-style: italic;'>&lt;int&gt;</span><span></div><div class='input'>
<span class='co'># For the sake of this example, wait 3 seconds or so to be sure that the data</span>
<span class='co'># has time to arrive.</span>
<span class='fu'><a href='https://rdrr.io/r/base/Sys.sleep.html'>Sys.sleep</a></span>(<span class='fl'>3</span>)

<span class='co'># Read the data off the sock and update "mkt_data"</span>
<span class='fu'><a href='read_sock_drawer.html'>read_sock_drawer</a></span>()

<span class='co'># Now you have a market data snapshot in your mkt_data slate! You can access it</span>
<span class='co'># with the "$" operator, like this:</span>
<span class='no'>mkt_data</span>$<span class='no'>Exxon_delayed</span>$<span class='no'>TICK_PRICE</span></div><div class='output co'>#&gt; </span><span style='color: #949494;'># A tibble: 7 x 3</span><span>
#&gt;   tick               price  size
#&gt;   </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>              </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>
#&gt; </span><span style='color: #BCBCBC;'>1</span><span> Delayed Last        33.4     1
#&gt; </span><span style='color: #BCBCBC;'>2</span><span> Delayed High Price  36.7     0
#&gt; </span><span style='color: #BCBCBC;'>3</span><span> Delayed Low Price   33.3     0
#&gt; </span><span style='color: #BCBCBC;'>4</span><span> Delayed Close       36.8     0
#&gt; </span><span style='color: #BCBCBC;'>5</span><span> Delayed Open         0       0
#&gt; </span><span style='color: #BCBCBC;'>6</span><span> Delayed Bid         33.4    11
#&gt; </span><span style='color: #BCBCBC;'>7</span><span> Delayed Ask         33.4    15</div><div class='input'><span class='no'>mkt_data</span>$<span class='no'>Exxon_delayed</span>$<span class='no'>TICK_SIZE</span></div><div class='output co'>#&gt; </span><span style='color: #949494;'># A tibble: 1 x 2</span><span>
#&gt;   tick             size
#&gt;   </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>           </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>
#&gt; </span><span style='color: #BCBCBC;'>1</span><span> Delayed Volume </span><span style='text-decoration: underline;'>237</span><span>787</div><div class='input'><span class='no'>mkt_data</span>$<span class='no'>Exxon_delayed</span>$<span class='no'>`Delayed Last Timestamp`</span></div><div class='output co'>#&gt; [1] "2020-03-18 12:48:59 EDT"</div><div class='input'><span class='no'>mkt_data</span>$<span class='no'>Exxon_delayed</span>$<span class='no'>TICK_REQ_PARAMS</span></div><div class='output co'>#&gt; </span><span style='color: #949494;'># A tibble: 1 x 3</span><span>
#&gt;   minTick bboExchange snapshotPermissions
#&gt;     </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>                     </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>
#&gt; </span><span style='color: #BCBCBC;'>1</span><span>    0.01 a60001                        1</div><div class='input'><span class='co'># ...etc</span>

<span class='co'># Note that the mkt_data subscription has been destroyed. This is because you </span>
<span class='co'># set snapshot to TRUE -- when read_sock_drawer() finds a completed snapshot,</span>
<span class='co'># it automatically updates the subscription.</span>
<span class='no'>subscriptions</span>$<span class='no'>mkt_data</span></div><div class='output co'>#&gt; NULL</div><div class='input'>

<span class='co'>#### Subscription Example: Five stocks</span>
<span class='co'>################################################################################</span>
<span class='co'># Snapshots are great if you just want to quickly fetch market data for a</span>
<span class='co'># contract and move on. Often, however, you'll want to stay up-to-date on market</span>
<span class='co'># data by creating a persistent subscription, causing the data in the mkt_data</span>
<span class='co'># slate to update every time read_sock_drawer() is called.</span>

<span class='co'># To do this, first create a sock for yourself (if you didn't already):</span>
<span class='fu'><a href='create_new_connections.html'>create_new_connections</a></span>()

<span class='co'># Now, set up market data subscriptions to Tesla, Apple, Facebook, 3M,</span>
<span class='co'># Interactive Brokers and whatever else you want to follow. Below, the walk()</span>
<span class='co'># function from package "purrr" is used to call req_mkt_data on each stock.</span>
<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"TSLA"</span>, <span class='st'>"AAPL"</span>, <span class='st'>"FB"</span>, <span class='st'>"MMM"</span>, <span class='st'>"IBKR"</span>) <span class='kw'>%&gt;%</span>
  <span class='kw pkg'>purrr</span><span class='kw ns'>::</span><span class='fu'><a href='https://purrr.tidyverse.org/reference/map.html'>walk</a></span>(
    <span class='kw'>function</span>(<span class='no'>stock_symbol</span>){
      <span class='fu'>req_mkt_data</span>(
        <span class='kw'>contract</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(
          <span class='kw'>symbol</span>   <span class='kw'>=</span> <span class='no'>stock_symbol</span>,
          <span class='kw'>secType</span>  <span class='kw'>=</span> <span class='st'>"STK"</span>,
          <span class='kw'>currency</span> <span class='kw'>=</span> <span class='st'>"USD"</span>,
          <span class='kw'>exchange</span> <span class='kw'>=</span> <span class='st'>"SMART"</span>
        ),
        <span class='kw'>mktDataType</span> <span class='kw'>=</span> <span class='st'>"DELAYED"</span>,
        <span class='kw'>snapshot</span>    <span class='kw'>=</span> <span class='fl'>FALSE</span>,
        <span class='kw'>channel</span>     <span class='kw'>=</span> <span class='st'>"async"</span>
      )
    }
  )

<span class='co'># Note that the mkt_data subscriptions you just created appear in the</span>
<span class='co'># subscriptions variable:</span>
<span class='no'>subscriptions</span>$<span class='no'>mkt_data</span></div><div class='output co'>#&gt; </span><span style='color: #949494;'># A tibble: 5 x 8</span><span>
#&gt;   req_name contract mktDataType snapshot regulatorySnaps… req_id conn_row
#&gt;   </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>    </span><span style='color: #949494;font-style: italic;'>&lt;list&gt;</span><span>         </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span>    </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span>             </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>    </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>
#&gt; </span><span style='color: #BCBCBC;'>1</span><span> 1_TSLA   </span><span style='color: #949494;'>&lt;chr [4</span><span>…           3 FALSE    FALSE                 7        6
#&gt; </span><span style='color: #BCBCBC;'>2</span><span> 2_AAPL   </span><span style='color: #949494;'>&lt;chr [4</span><span>…           3 FALSE    FALSE                 8        6
#&gt; </span><span style='color: #BCBCBC;'>3</span><span> 3_FB     </span><span style='color: #949494;'>&lt;chr [4</span><span>…           3 FALSE    FALSE                 9        7
#&gt; </span><span style='color: #BCBCBC;'>4</span><span> 4_MMM    </span><span style='color: #949494;'>&lt;chr [4</span><span>…           3 FALSE    FALSE                10        5
#&gt; </span><span style='color: #BCBCBC;'>5</span><span> 5_IBKR   </span><span style='color: #949494;'>&lt;chr [4</span><span>…           3 FALSE    FALSE                11        4
#&gt; </span><span style='color: #949494;'># … with 1 more variable: client_id </span><span style='color: #949494;font-style: italic;'>&lt;int&gt;</span><span></div><div class='input'>
<span class='co'># Wait a bit for the data to come through for example's sake...</span>
<span class='fu'><a href='https://rdrr.io/r/base/Sys.sleep.html'>Sys.sleep</a></span>(<span class='fl'>3</span>)

<span class='co'># Read the sock drawer as many times as you want</span>
<span class='fu'><a href='read_sock_drawer.html'>read_sock_drawer</a></span>()

<span class='co'># Access your data:</span>
<span class='no'>mkt_data</span>$<span class='no'>`1_TSLA`</span>$<span class='no'>TICK_PRICE</span></div><div class='output co'>#&gt; </span><span style='color: #949494;'># A tibble: 7 x 3</span><span>
#&gt;   tick               price  size
#&gt;   </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>              </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>
#&gt; </span><span style='color: #BCBCBC;'>1</span><span> Delayed Bid         380.     3
#&gt; </span><span style='color: #BCBCBC;'>2</span><span> Delayed Ask         380.     6
#&gt; </span><span style='color: #BCBCBC;'>3</span><span> Delayed Last        380.     1
#&gt; </span><span style='color: #BCBCBC;'>4</span><span> Delayed High Price  405.     0
#&gt; </span><span style='color: #BCBCBC;'>5</span><span> Delayed Low Price   378.     0
#&gt; </span><span style='color: #BCBCBC;'>6</span><span> Delayed Close       430.     0
#&gt; </span><span style='color: #BCBCBC;'>7</span><span> Delayed Open          0      0</div><div class='input'><span class='no'>mkt_data</span>$<span class='no'>`4_MMM`</span>$<span class='no'>TICK_PRICE</span></div><div class='output co'>#&gt; </span><span style='color: #949494;'># A tibble: 7 x 3</span><span>
#&gt;   tick               price  size
#&gt;   </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>              </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>
#&gt; </span><span style='color: #BCBCBC;'>1</span><span> Delayed Last        132.     2
#&gt; </span><span style='color: #BCBCBC;'>2</span><span> Delayed High Price  139.     0
#&gt; </span><span style='color: #BCBCBC;'>3</span><span> Delayed Low Price   128.     0
#&gt; </span><span style='color: #BCBCBC;'>4</span><span> Delayed Close       134.     0
#&gt; </span><span style='color: #BCBCBC;'>5</span><span> Delayed Open          0      0
#&gt; </span><span style='color: #BCBCBC;'>6</span><span> Delayed Bid         132.     1
#&gt; </span><span style='color: #BCBCBC;'>7</span><span> Delayed Ask         133.     1</div><div class='input'><span class='co'># ...etc</span>

<span class='co'># Because these subscriptions aren't for snapshots, they'll stay active until</span>
<span class='co'># cancelled. When you're ready, cancel any/all of your subscriptions:</span>
<span class='fu'><a href='cancel_mkt_data.html'>cancel_mkt_data</a></span>()

<span class='co'># Subscriptions are gone! </span>
<span class='no'>subscriptions</span>$<span class='no'>mkt_data</span></div><div class='output co'>#&gt; NULL</div></span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#details">Details</a></li>
      <li><a href="#no-sync-mode">No Sync Mode</a></li>
      <li><a href="#the-mkt-data-slate">The <a href='mkt_data.html'>mkt_data</a> Slate</a></li>
      <li><a href="#see-also">See also</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Jake Vestal.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


